<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lab — Self-Hosted Personal ERP for a Home Workshop | jans.lv</title>

  <link rel="stylesheet" href="../../assets/css/base.css" />
  <link rel="stylesheet" href="../../assets/css/projects.css" />
</head>

<body>
  <header class="site-header">
    <div class="wrap">
      <a class="brand" href="../../">jans.lv</a>
      <nav class="nav">
        <a href="../../projects/">Projects</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section class="hero lab-hero">
      <div class="lab-hero-text">
        <h1>Lab — Self-Hosted Personal ERP for a Home Workshop</h1>
        <p class="muted meta">A private control system for parts, orders, tasks and a lightweight ledger.</p>
        <div class="lab-badges" aria-label="Stack highlights">
          <span class="badge">LAN/VPN</span>
          <span class="badge">single-user</span>
          <span class="badge">PHP 8.2</span>
          <span class="badge">MariaDB</span>
          <span class="badge">Nginx</span>
          <span class="badge">GitHub Actions</span>
          <span class="badge">Cron</span>
        </div>
      </div>
      <figure class="lab-hero-cover">
        <img
          src="../../assets/img/projects/lab/cover.webp"
          alt="Lab cover showing the system dashboard"
          loading="eager"
        />
      </figure>
    </section>

    <section class="section">
      <div class="duo">
        <div class="panel">
          <h2>Problem → Solution</h2>
          <p>
            Workshop operations were spread across notes, spreadsheets and inboxes, making inventory and order status easy to miss.
            Context switching slowed down day-to-day work.
          </p>
          <p>
            Lab consolidates parts, orders, tasks and ledger events into a single, fast UI with stable URLs and saved list preferences.
            The result is predictable workflows and clearer next actions.
          </p>
        </div>

        <div class="panel">
          <h2>Capabilities</h2>
          <div class="lab-columns">
            <ul class="list-tight">
              <li>Parts inventory with units and minimums.</li>
              <li>Order intake with receiving workflow.</li>
              <li>Ledger entries tied to real actions.</li>
              <li>Task list with priority and due dates.</li>
            </ul>
            <ul class="list-tight">
              <li>Daily digest summary via email.</li>
              <li>URL-driven list state for sharing.</li>
              <li>Persisted table preferences.</li>
              <li>Responsive layout for quick checks.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="section">
      <h2>Engineering highlights</h2>
      <div class="lab-highlights">
        <div class="panel">
          <h3>Single-user auth</h3>
          <p class="muted">Environment-based access for a private LAN/VPN install.</p>
        </div>
        <div class="panel">
          <h3>CSRF on all POST</h3>
          <p class="muted">Safety guardrails on write operations.</p>
        </div>
        <div class="panel">
          <h3>Ledger idempotency</h3>
          <p class="muted">ref_type / ref_id prevent double-posted events.</p>
        </div>
        <div class="panel">
          <h3>Decimal qty + units</h3>
          <p class="muted">Accurate tracking for consumables and parts.</p>
        </div>
        <div class="panel">
          <h3>Server-side lists</h3>
          <p class="muted">URL state + persisted table prefs.</p>
        </div>
        <div class="panel">
          <h3>Self-hosted deploy</h3>
          <p class="muted">GitHub Actions runner pushes to the box.</p>
        </div>
        <div class="panel">
          <h3>Daily digest</h3>
          <p class="muted">Cron builds a focused recap.</p>
        </div>
      </div>
    </section>

    <section class="section">
      <h2>Screenshots</h2>
      <div class="gallery shot-grid" aria-label="Lab screenshots">
        <figure>
          <a href="../../assets/img/projects/lab/dashboard.webp" target="_blank" rel="noreferrer">
            <img src="../../assets/img/projects/lab/dashboard.webp" alt="Dashboard overview with signals and actions" loading="lazy" />
          </a>
          <figcaption>Dashboard: signals → actions <span class="subcap">Focus on next steps</span></figcaption>
        </figure>

        <figure>
          <a href="../../assets/img/projects/lab/parts.webp" target="_blank" rel="noreferrer">
            <img src="../../assets/img/projects/lab/parts.webp" alt="Inventory list with sidebar filters" loading="lazy" />
          </a>
          <figcaption>Inventory list <span class="subcap">URL state + sidebar filters</span></figcaption>
        </figure>

        <figure>
          <a href="../../assets/img/projects/lab/parts-info.webp" target="_blank" rel="noreferrer">
            <img src="../../assets/img/projects/lab/parts-info.webp" alt="Part detail with quantity and unit settings" loading="lazy" />
          </a>
          <figcaption>Part detail <span class="subcap">qty, min_qty, unit</span></figcaption>
        </figure>

        <figure>
          <a href="../../assets/img/projects/lab/orders.webp" target="_blank" rel="noreferrer">
            <img src="../../assets/img/projects/lab/orders.webp" alt="Orders view with item-level receiving flow" loading="lazy" />
          </a>
          <figcaption>Orders workflow <span class="subcap">item-level receiving</span></figcaption>
        </figure>

        <figure>
          <a href="../../assets/img/projects/lab/ledger.webp" target="_blank" rel="noreferrer">
            <img src="../../assets/img/projects/lab/ledger.webp" alt="Ledger audit trail with references" loading="lazy" />
          </a>
          <figcaption>Ledger <span class="subcap">audit trail + idempotent refs</span></figcaption>
        </figure>

        <figure>
          <a href="../../assets/img/projects/lab/tasks.webp" target="_blank" rel="noreferrer">
            <img src="../../assets/img/projects/lab/tasks.webp" alt="Tasks list with priority and due dates" loading="lazy" />
          </a>
          <figcaption>Tasks <span class="subcap">priorities, due dates, completion</span></figcaption>
        </figure>

        <figure>
          <a href="../../assets/img/projects/lab/digest.webp" target="_blank" rel="noreferrer">
            <img src="../../assets/img/projects/lab/digest.webp" alt="Daily digest email preview" loading="lazy" />
          </a>
          <figcaption>Daily digest <span class="subcap">cron + SMTP test</span></figcaption>
        </figure>
      </div>
    </section>

    <section class="section">
      <h2>Architecture</h2>
      <div class="panel">
        <p>Nginx fronts the single host and routes to PHP-FPM.</p>
        <p>Application layer runs on PHP 8.2 with a MariaDB datastore.</p>
        <p>Cron schedules the daily digest build and email.</p>
        <p>GitHub Actions deploys to a self-hosted runner.</p>
      </div>
      <div class="panel lab-arch">
        <pre class="ascii">Nginx -> PHP-FPM -> PHP app -> MariaDB
cron -> digest
GitHub Actions runner -> deploy</pre>
      </div>
    </section>

    <section class="section">
      <div class="duo">
        <div class="panel">
          <h2>Tradeoffs</h2>
          <ul class="list-tight">
            <li>Single-user focus limits shared workflows.</li>
            <li>Server-side rendering prioritizes reliability over rich client UI.</li>
            <li>Self-hosting adds maintenance and backup responsibility.</li>
          </ul>
        </div>

        <div class="panel">
          <h2>Planned next</h2>
          <ul class="list-tight">
            <li>Part usage history and movement reports.</li>
            <li>CSV import/export for inventory and orders.</li>
            <li>Digest formatting with action highlights.</li>
            <li>More granular table presets per workflow.</li>
          </ul>
        </div>
      </div>
    </section>

    <footer class="site-footer">
      <div class="wrap muted">© 2025 jans.lv</div>
    </footer>
  </main>
</body>
</html>
